{"version":3,"file":"commonHelpers.js","sources":["../src/js/base-url.js","../src/js/index.js"],"sourcesContent":["export const BASE_URL = 'https://pixabay.com/api/';\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\nimport { BASE_URL } from '../js/base-url';\n\nconst galleryContainer = document.querySelector('.gallery');\nconst searchForm = document.querySelector('.search-form');\nconst loaderContainer = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load-more-button');\nconst lightbox = new SimpleLightbox('.gallery-link');\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nsearchForm.addEventListener('submit', async function (event) {\n  event.preventDefault();\n  const queryInput = event.target.elements.query.value.trim();\n\n  if (queryInput === '') {\n    return;\n  }\n\n  currentQuery = queryInput;\n  currentPage = 1;\n  galleryContainer.innerHTML = '';\n  loaderContainer.style.display = 'block';\n\n  try {\n    const { hits, totalHits } = await fetchImages(currentQuery, currentPage);\n    if (Array.isArray(hits) && hits.length > 0) {\n      const galleryHTML = hits.map(createGallery).join('');\n      galleryContainer.innerHTML = galleryHTML;\n      toastSuccess(`Was found: ${totalHits} images`);\n      lightbox.refresh();\n      showLoadMoreButton();\n    } else {\n      toastError(\n        'Вибачте, немає зображень, які відповідають вашому пошуковому запиту. Будь ласка спробуйте ще раз!'\n      );\n    }\n  } catch (error) {\n    toastError(`Error fetching images: ${error.message}`);\n  } finally {\n    searchForm.reset();\n    loaderContainer.style.display = 'none';\n  }\n});\n\nloadMoreButton.addEventListener('click', async function () {\n  currentPage++;\n  loaderContainer.style.display = 'block';\n\n  try {\n    const { hits } = await fetchImages(currentQuery, currentPage);\n    if (Array.isArray(hits) && hits.length > 0) {\n      const galleryHTML = hits.map(createGallery).join('');\n      galleryContainer.innerHTML += galleryHTML;\n      lightbox.refresh();\n    } else {\n      hideLoadMoreButton();\n    }\n  } catch (error) {\n    toastError(`Error fetching more images: ${error.message}`);\n  } finally {\n    loaderContainer.style.display = 'none';\n  }\n});\n\nconst toastOptions = {\n  titleColor: '#FFFFFF',\n  messageColor: '#FFFFFF',\n  messageSize: '16px',\n  position: 'topRight',\n  displayMode: 'replace',\n  closeOnEscape: true,\n  pauseOnHover: false,\n  maxWidth: 432,\n  messageSize: '16px',\n  messageLineHeight: '24px',\n};\n\nfunction toastError(message) {\n  iziToast.show({\n    message,\n    backgroundColor: '#EF4040',\n    progressBarColor: '#FFE0AC',\n    icon: 'icon-close',\n    ...toastOptions,\n  });\n}\n\nfunction toastSuccess(message) {\n  iziToast.show({\n    message,\n    backgroundColor: '#59A10D',\n    progressBarColor: '#B5EA7C',\n    icon: 'icon-chek',\n    ...toastOptions,\n  });\n}\n\nasync function fetchImages(q, page) {\n  const params = {\n    key: '42198701-b9a5fa575f7b9ea832aebf9b8',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safeSearch: true,\n    per_page: 15,\n    q,\n    page,\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    if (!response.data) {\n      throw new Error('No data found');\n    }\n    return response.data;\n  } catch (error) {\n    throw new Error(`Error fetching images: ${error.message}`);\n  }\n}\n\nfunction createGallery({\n  largeImageURL,\n  tags,\n  webformatURL,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n  <a href=\"${largeImageURL}\" class=\"gallery-link\">\n     <figure>\n      <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\">\n      <figcaption class=\"gallery__figcaption\">\n        <div class=\"image-item\">Likes <span class=\"image-elem\">${likes}</span></div>\n        <div class=\"image-item\">Views <span class=\"image-elem\">${views}</span></div>\n        <div class=\"image-item\">Comments <span class=\"image-elem\">${comments}</span></div>\n        <div class=\"image-item\">Downloads <span class=\"image-elem\">${downloads}</span></div>\n      </figcaption>\n     </figure>\n  </a>\n`;\n}\n\nfunction showLoadMoreButton() {\n  loadMoreButton.style.display = 'block';\n}\n\nfunction hideLoadMoreButton() {\n  loadMoreButton.style.display = 'none';\n}\n\n/**\n |============================\n | \n |============================\n*/\nconst endOfCollectionMessage =\n  'Вибачте, але ви досягли кінця результатів пошуку.';\n\nfunction updateLoadMoreButton(totalHits) {\n  if (currentPage * 15 >= totalHits) {\n    hideLoadMoreButton();\n    toastError(endOfCollectionMessage);\n  } else {\n    showLoadMoreButton();\n  }\n}\n\nloadMoreButton.addEventListener('click', async function () {\n  currentPage++;\n  loaderContainer.style.display = 'block';\n\n  try {\n    const { hits, totalHits } = await fetchImages(currentQuery, currentPage);\n    if (Array.isArray(hits) && hits.length > 0) {\n      const galleryHTML = hits.map(createGallery).join('');\n      galleryContainer.innerHTML += galleryHTML;\n      lightbox.refresh();\n    } else {\n      updateLoadMoreButton(totalHits);\n    }\n  } catch (error) {\n    toastError(`Error fetching more images: ${error.message}`);\n  } finally {\n    loaderContainer.style.display = 'none';\n  }\n});\n\nloadMoreButton.addEventListener('click', async function () {\n  currentPage++;\n  loaderContainer.style.display = 'block';\n\n  try {\n    const { hits, totalHits } = await fetchImages(currentQuery, currentPage);\n    if (Array.isArray(hits) && hits.length > 0) {\n      const galleryHTML = hits.map(createGallery).join('');\n      galleryContainer.innerHTML += galleryHTML;\n      lightbox.refresh();\n      smoothScrollToNextGroup();\n    } else {\n      updateLoadMoreButton(totalHits);\n    }\n  } catch (error) {\n    toastError(`Error fetching more images: ${error.message}`);\n  } finally {\n    loaderContainer.style.display = 'none';\n  }\n});\n\nfunction smoothScrollToNextGroup() {\n  const galleryCardHeight = document\n    .querySelector('.gallery-link')\n    .getBoundingClientRect().height;\n  const scrollHeight = galleryCardHeight * 3;\n  window.scrollBy({ top: scrollHeight, behavior: 'smooth' });\n}\n"],"names":["BASE_URL","galleryContainer","searchForm","loaderContainer","loadMoreButton","lightbox","SimpleLightbox","currentPage","currentQuery","event","queryInput","hits","totalHits","fetchImages","galleryHTML","createGallery","toastSuccess","showLoadMoreButton","toastError","error","hideLoadMoreButton","toastOptions","message","iziToast","q","page","params","response","axios","largeImageURL","tags","webformatURL","likes","views","comments","downloads","endOfCollectionMessage","updateLoadMoreButton","smoothScrollToNextGroup","scrollHeight"],"mappings":"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"}